<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6930c3">
    <meta name="description" content="PDF Compressor - Compress your PDF files locally in your browser without uploading them to any server">
    
    <title>PDF Compressor</title>
    
    <!-- HtmlWebpackPlugin will inject CSS files here -->
    
    <!-- Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" sizes="192x192" href="./assets/icons/icon-192x192.svg">
    <link rel="apple-touch-icon" sizes="192x192" href="./assets/icons/icon-192x192.svg">
    
    <!-- iOS Safari -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="PDF Compressor">
    
    <!-- Preconnect do CDN dla szybszego ≈Çadowania -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Lazy loading bibliotek PDF -->
    <script>
      // Funkcja do dynamicznego ≈Çadowania skrypt√≥w
      function loadScript(src) {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = src;
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }

      // Lazy load bibliotek tylko gdy potrzebne
      window.loadPDFLibraries = async function() {
        if (window.PDFLib && window.pdfjsLib) return;
        
        try {
          // Poka≈º loading indicator
          if (window.showLoadingLibraries) window.showLoadingLibraries();
          
          // ≈Åaduj r√≥wnolegle
          await Promise.all([
            !window.PDFLib && loadScript('https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js'),
            !window.pdfjsLib && loadScript('https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js')
          ]);
          
          // Ustaw worker dla pdf.js
          if (window.pdfjsLib) {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
          }
          
          // Ukryj loading indicator
          if (window.hideLoadingLibraries) window.hideLoadingLibraries();
          
          return true;
        } catch (error) {
          console.error('Failed to load PDF libraries:', error);
          // Fallback do lokalnych bibliotek
          return false;
        }
      };
    </script>
    
    <style>
      .spinner {
        width: 40px;
        height: 40px;
        margin: 0 auto 10px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #6930c3;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
<meta name="theme-color" content="#4361ee" /><link rel="manifest" href="auto/manifest.bc5d5e43ad23ca9d7f16b2caa94c34b3.json" crossorigin="use-credentials" /><link rel="mask-icon" href="auto/assets/icons/icon_512x512.a14798f46a7232a9a8d8cc57bc3d3ce4.svg" /></head>
<body>
    <!-- PWA Installation Banner (hidden by default) -->
    <div id="installBanner" class="install-banner" style="display: none;">
        <p>Install PDF Compressor PWA for offline access</p>
        <button id="installBtn">Install</button>
        <button id="closeInstallBanner">‚úï</button>
    </div>

    <!-- Offline Notification (hidden by default) -->
    <div id="offlineNotification" class="offline-notification" style="display: none;">
        <p>You are currently offline. Some features may be limited.</p>
    </div>
    
    <!-- Library loading indicator -->
    <div id="library-loader" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;">
      <div class="spinner"></div>
      <p>≈Åadowanie bibliotek PDF...</p>
    </div>

    <header class="header">
        <div class="header-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12h6m-3-3v6m5 5H7a2 2 0 01-2-2V6a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V18a2 2 0 01-2 2z"/>
                <path d="M13 3v5a1 1 0 001 1h5"/>
            </svg>
            <span>PDF Compressor</span>
        </div>
        
        <div class="header-controls">
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"/>
                    <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m16.24-6.24l-4.24 4.24m-6 6l-4.24 4.24m0-10.48l4.24 4.24m6 6l4.24 4.24"/>
                </svg>
                <svg class="moon-icon" style="display: none;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                </svg>
            </button>
        </div>
    </header>
    
    <main>
        <div class="upload-container">
            <!-- Drag and Drop Area -->
            <div class="drop-area" id="dropArea">
                <div class="drop-icon">üìÅ</div>
                <p>Drag & drop your PDF file here</p>
                <p class="file-limit">Supports files up to 500MB</p>
                <button id="browseBtn">Browse Files</button>
                <input type="file" id="fileInput" accept=".pdf" hidden>
            </div>
            
            <!-- File Info Panel (hidden by default) -->
            <div class="file-info-panel" id="fileInfoPanel" style="display: none;">
                <h3>File Information</h3>
                <div class="info-row">
                    <span class="label">File Name:</span>
                    <span id="fileName" class="value"></span>
                </div>
                <div class="info-row">
                    <span class="label">File Size:</span>
                    <span id="fileSize" class="value"></span>
                </div>
                <div class="info-row">
                    <span class="label">Page Count:</span>
                    <span id="pageCount" class="value"></span>
                </div>
                <div class="info-row">
                    <span class="label">Estimated Images:</span>
                    <span id="imageCount" class="value"></span>
                </div>
            </div>
            
            <!-- Options Section -->
            <div class="options-section">
                <div class="tabs">
                    <div class="tab active" data-tab="compression">Compression</div>
                    <div class="tab" data-tab="removal">Removal</div>
                    <div class="tab" data-tab="split">Split</div>
                </div>
                
                <div class="tab-content">
                    <!-- Compression Tab -->
                    <div class="tab-pane active" id="compressionTab">
                        <div class="option-item">
                            <div class="option-header">
                                <span class="option-label">Image Compression</span>
                            </div>
                            <div class="slider-container">
                                <label for="qualitySlider">Quality: <span id="qualityValue">70</span>%</label>
                                <input type="range" id="qualitySlider" min="10" max="100" value="70">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Removal Tab -->
                    <div class="tab-pane" id="removalTab">
                        <div class="option-item">
                            <div class="option-header">
                                <span class="option-label">Remove Images</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Split Tab -->
                    <div class="tab-pane" id="splitTab">
                        <div class="option-item">
                            <div class="option-header">
                                <span class="option-label">Split PDF</span>
                            </div>
                            <div class="split-options">
                                <div class="radio-group">
                                    <input type="radio" id="splitByPages" name="splitMethod" value="pages" checked>
                                    <label for="splitByPages">By Page Range</label>
                                </div>
                                <div class="radio-group">
                                    <input type="radio" id="splitBySize" name="splitMethod" value="size">
                                    <label for="splitBySize">By File Size</label>
                                </div>
                                <div class="split-input" id="pagesInput">
                                    <label for="pageRange">Page Range (e.g., 1-5):</label>
                                    <input type="text" id="pageRange" placeholder="1-5">
                                </div>
                                <div class="split-input" id="sizeInput" style="display: none;">
                                    <label for="fileSizeLimit">Max File Size (MB):</label>
                                    <input type="number" id="fileSizeLimit" min="1" max="500" value="10">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="resetBtn">Reset</button>
                <button id="processBtn">Process PDF</button>
            </div>
            
            <!-- Progress Section (hidden by default) -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">Processing...</p>
            </div>
            
            <!-- Results Section (hidden by default) -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <h3>Processing Complete!</h3>
                <div class="result-item">
                    <span>Original File:</span>
                    <a href="#" id="originalDownload" download>Download Original</a>
                </div>
                <div class="result-item">
                    <span>Compressed File:</span>
                    <a href="#" id="compressedDownload" download>Download Compressed</a>
                </div>
                <div class="result-stats">
                    <p>Original Size: <span id="originalSize"></span></p>
                    <p>Compressed Size: <span id="compressedSize"></span></p>
                    <p>Savings: <span id="savings"></span></p>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <img src="./assets/bart_ex.png" alt="Bart Ex Logo" class="footer-logo">
    </footer>
    
    <!-- HtmlWebpackPlugin will inject JS files here -->
    
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = themeToggle.querySelector('.sun-icon');
        const moonIcon = themeToggle.querySelector('.moon-icon');
        const htmlElement = document.documentElement;
        
        // Check for saved theme preference or default to light
        const currentTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-theme', currentTheme);
        updateThemeIcons(currentTheme);
        
        // Toggle theme
        themeToggle.addEventListener('click', () => {
            const theme = htmlElement.getAttribute('data-theme');
            const newTheme = theme === 'light' ? 'dark' : 'light';
            
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcons(newTheme);
        });
        
        function updateThemeIcons(theme) {
            if (theme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        }
        
        // Check system preference
        if (!localStorage.getItem('theme')) {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                htmlElement.setAttribute('data-theme', 'dark');
                updateThemeIcons('dark');
            }
        }
        
        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                const newTheme = e.matches ? 'dark' : 'light';
                htmlElement.setAttribute('data-theme', newTheme);
                updateThemeIcons(newTheme);
            }
        });
    </script>
<script defer src="app.3380a16a57f21420567e.js"></script><script defer src="styles.0c73e08e627400a68805.js"></script></body>
</html>